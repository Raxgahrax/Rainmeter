; The Swan terminal [004:00]

[Rainmeter]
Update=60
BackgroundMode=2
SolidColor=0,0,0,1
TransitionUpdate=20
OnRefreshAction= [!RainmeterEnableMeasure Fixer1]    [!UnpauseMeasureGroup 108-00][!ShowMeterGroup 108-00]   [!PauseMeasureGroup 004-00][!HideMeterGroup 004-00]  [!PauseMeasureGroup XXX-XX][!HideMeterGroup XXX-XX]  [!SnapEdges 0][!KeepOnScreen 0]
LeftMouseUpAction=[!ToggleConfig "#ROOTCONFIG#\Lost\Swan\Terminal" "Terminal.ini"]


[Metadata]
Author=HNB Framework
Description=The Swan terminal [004:00]
License=CC BY-NC-SA
Version=1.0.0

@include=#@#options.inc
@include2=#@#language.inc
@include3=#@#/#Theme#/theme.inc


; PROCESSES CONTROL ******************************

[---:--]
Measure=Calc
IfCondition=MainTimer1 = 4
IfTrueAction=[!UnpauseMeasureGroup 004-00][!ShowMeterGroup 004-00]   [!PauseMeasureGroup 108-00][!HideMeterGroup 108-00]
IfCondition2=(Clock <= 2400) && (Clock >=  600) && ((Fixer6 = 58) | (Fixer6 = 56) | (Fixer6 = 54) | (Fixer6 = 52) | (Fixer6 = 50) | (Fixer6 = 48) | (Fixer6 = 46) | (Fixer6 = 44) | (Fixer6 = 42) | (Fixer6 = 40) | (Fixer6 = 38) | (Fixer6 = 36) | (Fixer6 = 34) | (Fixer6 = 32) | (Fixer6 = 30) | (Fixer6 = 28) | (Fixer6 = 26) | (Fixer6 = 24) | (Fixer6 = 22) | (Fixer6 = 20) | (Fixer6 = 18) | (Fixer6 = 16) | (Fixer6 = 16) | (Fixer6 = 14) | (Fixer6 = 12) | (Fixer6 = 10) | (Fixer6 = 8) | (Fixer6 = 6) |(Fixer6 = 4) | (Fixer6 = 2) | (Fixer6 = 0))
IfTrueAction2=[Play "#@#/Sounds/beep.wav"]
IfFalseAction2=[Play "#@#/Sounds/tick.wav"]
IfCondition3=((Clock <= 590) && (Clock >=101)) && (Fixer7 = 0) && ((Fixer6 = 58) | (Fixer6 = 56) | (Fixer6 = 54) | (Fixer6 = 52) | (Fixer6 = 50) | (Fixer6 = 48) | (Fixer6 = 46) | (Fixer6 = 44) | (Fixer6 = 42) | (Fixer6 = 40) | (Fixer6 = 38) | (Fixer6 = 36) | (Fixer6 = 34) | (Fixer6 = 32) | (Fixer6 = 30) | (Fixer6 = 28) | (Fixer6 = 26) | (Fixer6 = 24) | (Fixer6 = 22) | (Fixer6 = 20) | (Fixer6 = 18) | (Fixer6 = 16) | (Fixer6 = 16) | (Fixer6 = 14) | (Fixer6 = 12))
IfTrueAction3=[Play "#@#/Sounds/alarm.wav"]
IfFalseAction3=[Play "#@#/Sounds/tick.wav"]
IfCondition4=(Clock <= 100) && (Fixer4 <= 99) && (Fixer7 = 0) && ((Fixer6 = 10) | (Fixer6 = 8) | (Fixer6 = 6) |(Fixer6 = 4) | (Fixer6 = 2) | (Fixer6 = 0))
IfTrueAction4=[Play "#@#/Sounds/alarm.wav"]
IfFalseAction4=[Play "#@#/Sounds/alarm.wav"]
IfCondition5=(Clock = 0) && (Fixer7 = 0) && ((Fixer6 = 0)) 
IfTrueAction5=[!PauseMeasureGroup 004-00]
IfCondition6=Start >=5
IfTrueAction6=[!ActivateConfig "#ROOTCONFIG#\Lost\Swan" "000-00.ini"]

[Clock]
Measure=Calc
Formula=Fixer3

[Start]
Measure=CALC
Formula=Start+1
UpdateDivider=962
Disabled=1


; 108:00 *****************************************

[MainTimer1]
Measure=Calc
Formula=(MainTimer1-1+(#LostSetTime#+1))%(#LostSetTime#+1)
OnUpdateAction=[Play "#@#/Sounds/tick.wav"][!WriteKeyValue "Variables" "LostCurTime" [MainTimer1] "#@#options.inc"]
Group=108-00
IfCondition= MainTimer1 = 4
IfTrueAction=[!EnableMeasure Start]
Paused=0
UpdateDivider=1000

[Minuta:108]
Meter=Bitmap
MeasureName=MainTimer1
X=120
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=3
BitmapSeparation=0
Group=108-00
Paused=0

[Secunda:--]
Meter=Bitmap
MeasureName=---:--
X=102r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big_white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=2
BitmapSeparation=1
Group=108-00
Paused=0


; 104:00 *****************************************

[MainTimer2]
Measure=Time
Group=004-00
Paused=0

[Fixer1]
Measure=Calc
Formula=Fixer1 = 0 ? MainTimer2 - Fixer2 / 10 : Fixer1
Group=004-00
Paused=1

[Fixer2]
Measure=Calc
Formula=Fixer1 = 0 ? Fixer2 : (MainTimer2 - Fixer1) *10
Group=004-00
Paused=0

[Fixer3]
Measure=Calc
Format=%S
Formula=2400 - Fixer2
IfBelowValue=1
IfBelowAction=!Execute [!RainmeterDisableMeasure Fixer1]
Group=004-00
Paused=0

[Fixer4]
Measure=Calc
Formula=Fixer1=0?1:Fixer3-1
IfBelow=0
IfBelowAction=!Execute [!RainmeterDisableMeasure Fixer1]
Group=004-00
Paused=0

[Fixer6]
Measure=Calc
Formula=(floor(Fixer3/10))%60
Format=%S
Group=004-00
Paused=0

[Fixer7]
Measure=Calc
Formula=(floor(Fixer3/600))%60
Format=%M
Group=004-00
Paused=0

[Minuta:004]
Meter=Bitmap
MeasureName=Fixer7
X=120
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=3
BitmapSeparation=0
Group=004-00
Hidden=1

[Secunda:00]
Meter=Bitmap
MeasureName=Fixer6
X=102r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big_white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=2
BitmapSeparation=1
Group=004-00
Hidden=1


; IMAGES *****************************************

[Underline1]
Meter=Image
MeterStyle=Hline
X=1
Y=21
W=220

[Underline2]
Meter=Image
MeterStyle=Hline
X=r
Y=40r
W=220

[Colonline1]
Meter=Image
MeterStyle=Vline
ImageAlpha=150
X=124
Y=25
H=35

[Colonline2]
Meter=Image
MeterStyle=Vline
ImageAlpha=150
X=129
Y=25
H=35