; The Swan timer [000:00]

[Rainmeter]
Update=60
BackgroundMode=2
SolidColor=0,0,0,1
TransitionUpdate=20
OnRefreshAction=[Play "#@#/Sounds/failure.wav"][!HideMeterGroup X1][!HideMeterGroup X2][!HideMeterGroup X3][!HideMeterGroup X4][!HideMeterGroup X5][!HideMeterGroup Y1][!HideMeterGroup Y2][!HideMeterGroup Y3][!HideMeterGroup Y4][!HideMeterGroup Y5]  [!WriteKeyValue "Variables" "LostCurTime" "0" "#@#options.inc"][!SnapEdges 0][!KeepOnScreen 0] [!WriteKeyValue "Variables" "LostFailureTime" "-1" "#@#options.inc"]
LeftMouseUpAction=[!ToggleConfig "#ROOTCONFIG#\Lost\Swan\Terminal" "Terminal.ini"]

[Metadata]
Author=HNB Framework
Description=The Swan timer [000:00]
License=CC BY-NC-SA
Version=1.0

@include=#@#options.inc
@include2=#@#/#Theme#/theme.inc


; SEQUENCE ***************************************

[Recount]
Measure=CALC
Formula=Recount+1

; ---:-X
IfCondition=Recount = 35
IfTrueAction=[!ShowMeterGroup X5]
IfCondition2=Recount = 50
IfTrueAction2=[!HideMeterGroup 5]
IfCondition3=Recount = 110
IfTrueAction3=[!HideMeterGroup X5][!ShowMeterGroup Y5]

; ---:X-
IfCondition4=Recount = 25
IfTrueAction4=[!ShowMeterGroup X4]
IfCondition5=Recount = 40
IfTrueAction5=[!HideMeterGroup 4]
IfCondition6=Recount = 95
IfTrueAction6=[!HideMeterGroup X4][!ShowMeterGroup Y4]

; --X:--
IfCondition7=Recount = 90
IfTrueAction7=[!ShowMeterGroup X3]
IfCondition8=Recount = 100
IfTrueAction8=[!HideMeterGroup 3]
IfCondition9=Recount = 168
IfTrueAction9=[!HideMeterGroup X3][!ShowMeterGroup Y3]

; -X-:--
IfCondition10=Recount = 140
IfTrueAction10=[!ShowMeterGroup X2]
IfCondition11=Recount = 155
IfTrueAction11=[!HideMeterGroup 2]
IfCondition12=Recount = 187
IfTrueAction12=[!HideMeterGroup X2][!ShowMeterGroup Y2]

; X--:--
IfCondition13=Recount = 65
IfTrueAction13=[!ShowMeterGroup X1]
IfCondition14=Recount = 80
IfTrueAction14=[!HideMeterGroup 1]
IfCondition15=Recount = 135
IfTrueAction15=[!HideMeterGroup X1][!ShowMeterGroup Y1]

; Alert color
IfCondition16=Recount = 90
IfTrueAction16=[!HideMeterGroup Normal][!ShowMeterGroup Alert]

; Shockflash
IfCondition17=(Recount > 60) && (Recount < 85)
IfTrueAction17=!ShowMeter Flashing
IfFalseAction17=!HideMeter Flashing

; Crash
IfCondition18=Recount > 1620
IfTrueAction18=[!ShowMeter Z1][!ShowMeter Z2][!ShowMeter Z3] | [!ShowMeter Z4][!ShowMeter Z5]   [!HideMeter Y1][!HideMeter Y2][!HideMeter Y3] | [!HideMeter Y4][!HideMeter Y5]

; Disabler
IfCondition19=Recount > 2220
IfTrueAction19=[!WriteKeyValue "Variables" "LostFailureTime" "10" "#@#options.inc"][!Refresh "#ROOTCONFIG#\Lost\Swan\Terminal" "Terminal.ini"] [!DisableMeasure CounterAlert][!DisableMeasure Timer1][!DisableMeasure Timer2][!DisableMeasure Timer3][!DisableMeasure Timer4][!DisableMeasure Timer5][!DisableMeasure ReCount][!ActivateConfig "#ROOTCONFIG#\Lost\Swan" "Reset.ini"]

; System  failure
IfCondition20=Recount = 210
IfTrueAction20=[!WriteKeyValue "Variables" "LostFailureTime" "0" "#@#options.inc"][!WriteKeyValue "Variables" "LostLockdown" "0" "#@#options.inc"][!Refresh "#ROOTCONFIG#\Lost\Swan\Terminal" "Terminal.ini"]


; RESET ******************************************

[CounterAlert]
Measure=CALC
Formula=Counter % 174
Disabled=0

[Timer1]
Measure=Calc
Formula=Timer1+1
Group=000-00
Paused=0

[Timer2]
Measure=Calc
Formula=Timer2+2
Group=000-00
Paused=0

[Timer3]
Measure=Calc
Formula=(Timer2-1+(9))%(9)
Group=000-00
Paused=0

[Timer4]
Measure=Calc
Formula=Timer4+1
Group=000-00
Paused=0

[Timer5]
Measure=Calc
Formula=(Timer2-2+(9))%(9)
Group=000-00
Paused=0

[Flashing]
Meter=Bitmap
MeasureName=CounterAlert
X=2
Y=23
BitmapImage=#@#/#Theme#/power-flash-low.png
BitmapFrames=12
BitmapExtend=1
BitmapDigits=1
Hidden=1

[1]
Meter=Bitmap
MeasureName=Timer1
X=34
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=0
Group=1

[2]
Meter=Bitmap
MeasureName=Timer2
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=2

[3]
Meter=Bitmap
MeasureName=Timer3
X=43r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=3

[4]
Meter=Bitmap
MeasureName=Timer4
X=57r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big_white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=4

[5]
Meter=Bitmap
MeasureName=Timer5
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/nums_big_white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=5
Paused=0


; DOWN *******************************************

[X1]
Meter=Bitmap
MeasureName=Timer1
X=34
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=0
Group=X1

[X2]
Meter=Bitmap
MeasureName=Timer2
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=X2

[X3]
Meter=Bitmap
MeasureName=Timer3
X=43r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=X3

[X4]
Meter=Bitmap
MeasureName=Timer4
X=57r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=X4

[X5]
Meter=Bitmap
MeasureName=Timer5
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=X5
Paused=0


; HIEROGLYPHS ************************************

[Sign1]
Measure=CALC
Formula=0

[Sign2]
Measure=CALC
Formula=1

[Sign3]
Measure=CALC
Formula=2

[Sign4]
Measure=CALC
Formula=3

[Sign5]
Measure=CALC
Formula=4

[Y1]
Meter=Bitmap
MeasureName=Sign1
X=34
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=0
Group=Y1
Hidden=1

[Y2]
Meter=Bitmap
MeasureName=Sign2
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Y2
Hidden=1

[Y3]
Meter=Bitmap
MeasureName=Sign3
X=43r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Y3
Hidden=1

[Y4]
Meter=Bitmap
MeasureName=Sign4
X=57r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Y4
Hidden=1

[Y5]
Meter=Bitmap
MeasureName=Sign5
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapTransitionFrames=1
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Y5
Hidden=1


; BROKEN *****************************************

[Crash1]
Measure=CALC
Formula=9

[Crash2]
Measure=CALC
Formula=14

[Crash3]
Measure=CALC
Formula=7

[Crash4]
Measure=CALC
Formula=5

[Crash5]
Measure=CALC
Formula=8

[Z1]
Meter=Bitmap
MeasureName=Crash1
X=34
Y=0
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=0
Group=Z1
Hidden=1

[Z2]
Meter=Bitmap
MeasureName=Crash2
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Z2
Hidden=1

[Z3]
Meter=Bitmap
MeasureName=Crash3
X=43r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-black.png
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Z3
Hidden=1

[Z4]
Meter=Bitmap
MeasureName=Crash4
X=57r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Z4
Hidden=1

[Z5]
Meter=Bitmap
MeasureName=Crash5
X=44r
Y=r
BitmapAlign=RIGHT
BitmapImage=#@#/#Theme#/hier-white.png
BitmapFrames=20
BitmapExtend=1
BitmapDigits=1
BitmapSeparation=1
Group=Z5
Hidden=1


; IMAGES *****************************************

[Underline1]
Meter=Image
MeterStyle=Hline
X=1
Y=21
W=220
Group=Normal

[Underline2]
Meter=Image
MeterStyle=Hline
X=r
Y=40r
W=220
Group=Normal

[Colonline1]
Meter=Image
MeterStyle=Vline
ImageAlpha=150
X=124
Y=25
H=35
Group=Normal

[Colonline2]
Meter=Image
MeterStyle=Vline
ImageAlpha=150
X=129
Y=25
H=35
Group=Normal


; RED ALERT IMAGES *******************************

[UnderlineX1]
Meter=Image
SolidColor=#TitleText#
X=1
Y=22
W=220
H=1
Group=Alert
Hidden=1

[UnderlineX2]
Meter=Image
SolidColor=#TitleText#
X=r
Y=40r
W=220
H=1
Group=Alert
Hidden=1

[ColonlineX1]
Meter=Image
SolidColor=#TitleText#
X=125
Y=25
W=1
H=35
Group=Alert
Hidden=1

[ColonlineX2]
Meter=Image
SolidColor=#TitleText#
X=130
Y=25
H=35
W=1
Group=Alert
Hidden=1


; LOST *******************************************